{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="search-container">
    <div class="search-item">
        <label for="sido">ì‹œÂ·ë„ ì„ íƒ :</label>
        <select id="sido">
            <option value="">ì‹œÂ·ë„ ì„ íƒ</option>
            <!-- íŠ¹ë³„ì‹œ ë° ê´‘ì—­ì‹œ ë¨¼ì € -->
            <option value="ì„œìš¸íŠ¹ë³„ì‹œ">ì„œìš¸íŠ¹ë³„ì‹œ</option>
            <option value="ê´‘ì£¼ê´‘ì—­ì‹œ">ê´‘ì£¼ê´‘ì—­ì‹œ</option>
            <option value="ëŒ€êµ¬ê´‘ì—­ì‹œ">ëŒ€êµ¬ê´‘ì—­ì‹œ</option>
            <option value="ëŒ€ì „ê´‘ì—­ì‹œ">ëŒ€ì „ê´‘ì—­ì‹œ</option>
            <option value="ë¶€ì‚°ê´‘ì—­ì‹œ">ë¶€ì‚°ê´‘ì—­ì‹œ</option>
            <option value="ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ">ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ</option>
            <option value="ìš¸ì‚°ê´‘ì—­ì‹œ">ìš¸ì‚°ê´‘ì—­ì‹œ</option>
            <option value="ì¸ì²œê´‘ì—­ì‹œ">ì¸ì²œê´‘ì—­ì‹œ</option>

            <!-- ë„(é“) ë‹¨ìœ„ -->
            <option value="ê°•ì›ë„">ê°•ì›ë„</option>
            <option value="ê²½ê¸°ë„">ê²½ê¸°ë„</option>
            <option value="ê²½ìƒë‚¨ë„">ê²½ìƒë‚¨ë„</option>
            <option value="ê²½ìƒë¶ë„">ê²½ìƒë¶ë„</option>
            <option value="ì „ë¼ë‚¨ë„">ì „ë¼ë‚¨ë„</option>
            <option value="ì „ë¼ë¶ë„">ì „ë¼ë¶ë„</option>
            <option value="ì¶©ì²­ë‚¨ë„">ì¶©ì²­ë‚¨ë„</option>
            <option value="ì¶©ì²­ë¶ë„">ì¶©ì²­ë¶ë„</option>

            <!-- íŠ¹ë³„ìì¹˜ë„ -->
            <option value="ì œì£¼íŠ¹ë³„ìì¹˜ë„">ì œì£¼íŠ¹ë³„ìì¹˜ë„</option>
        </select>
    </div>

    <div class="search-item">
        <label for="sigungu">ì‹œÂ·êµ°Â·êµ¬ ì„ íƒ :</label>
        <select id="sigungu">
            <option value="">ì‹œÂ·êµ°Â·êµ¬ ì„ íƒ</option>
        </select>
    </div>

    <div class="search-item">
        <label for="eupmyeondong">ìÂ·ë©´Â·ë™ ì„ íƒ :</label>
        <select id="eupmyeondong">
            <option value="">ìÂ·ë©´Â·ë™ ì„ íƒ</option>
        </select>
    </div>

    <button type="submit" class="search-button">
        <img src="{% static 'images/Search-icon.svg' %}" alt="ê²€ìƒ‰" class="search-icon">
    </button>
</div>

<!-- ğŸ“Š ë°ì´í„° & ì§€ë„ ì»¨í…Œì´ë„ˆ -->
<div class="content-container">
    <!-- ğŸŒ¦ï¸ ë°ì´í„° ë°•ìŠ¤ -->
    <div class="data-container">
        <div class="weather-box">
            <h3 class="box-title blue">ê¸°ìƒë°ì´í„°</h3>
            <ul>
                <li>ğŸŒ¡ï¸ ìµœì € ì˜¨ë„: -</li>
                <li>ğŸŒ¡ï¸ ìµœê³  ì˜¨ë„: -</li>
                <li>ğŸ’§ ìŠµë„: -</li>
                <li>ğŸŒ¬ï¸ í’ì†: -</li>
                <li>â˜€ï¸ ì¼ì‚¬ëŸ‰: -</li>
                <li>ğŸŒ§ï¸ ê°•ìˆ˜ëŸ‰: -</li>
            </ul>
        </div>
        <div class="soil-box">
            <h3 class="box-title brown">í† ì–‘ë°ì´í„°</h3>
            <ul>
                <li>ğŸŸ¤ í† ìƒ‰: -</li>
                <li><b>ì‚°ë„(PH)</b>: -</li>
                <li>ğŸŒ± ìœ ê¸°ë¬¼: -</li>
                <li>ğŸ§ª ìœ íš¨ì¸ì‚°: -</li>
                <li>ğŸ¦´ ì¹¼ë¥¨: -</li>
                <li>ğŸ¦´ ì¹¼ìŠ˜: -</li>
                <li>ğŸ§‚ ë§ˆê·¸ë„¤ìŠ˜: -</li>
            </ul>
        </div>
    </div>

    <!-- ğŸ—ºï¸ ì§€ë„ ë°•ìŠ¤ -->
    <div class="map-container">
        <iframe 
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3165.1738270689796!2d127.0303355156841!3d37.491723479812194!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x357ca4d548b0b25f%3A0x97c3ddc4c83065a0!2sSeoul!5e0!3m2!1sen!2skr!4v1643123123123!5m2!1sen!2skr"
            width="100%"
            height="100%"
            style="border:0;"
            allowfullscreen=""
            loading="lazy">
        </iframe>
    </div>
</div>

<script>
    // views.pyì—ì„œ ì „ë‹¬ë°›ì€ ë°ì´í„°
    const regionData = JSON.parse('{{ region_json|escapejs }}');
    const emdData = JSON.parse('{{ emd_json|escapejs }}');  // ìë©´ë™ ë°ì´í„° ì¶”ê°€
    
    // ì‹œÂ·ë„ ì„ íƒì‹œ ì‹œêµ°êµ¬ ì±„ìš°ê¸°
    document.getElementById('sido').addEventListener('change', function() {
        const selectedSido = this.value;
        const sigunguSelect = document.getElementById('sigungu');
        sigunguSelect.innerHTML = '<option value="">ì‹œÂ·êµ°Â·êµ¬ ì„ íƒ</option>';
    
        if (selectedSido && regionData[selectedSido]) {
            regionData[selectedSido].forEach(function(sigungu) {
                const option = document.createElement('option');
                option.value = sigungu;
                option.textContent = sigungu;
                sigunguSelect.appendChild(option);
            });
        }
    
        // ìë©´ë™ ì´ˆê¸°í™”
        document.getElementById('eupmyeondong').innerHTML = '<option value="">ìÂ·ë©´Â·ë™ ì„ íƒ</option>';
    });
    
    // ì‹œÂ·êµ°Â·êµ¬ ì„ íƒì‹œ ìë©´ë™ ì±„ìš°ê¸°
    document.getElementById('sigungu').addEventListener('change', function() {
        const selectedSigungu = this.value;
        const eupmyeondongSelect = document.getElementById('eupmyeondong');
        eupmyeondongSelect.innerHTML = '<option value="">ìÂ·ë©´Â·ë™ ì„ íƒ</option>';
    
        if (selectedSigungu && emdData[selectedSigungu]) {
            emdData[selectedSigungu].forEach(function(emd) {
                const option = document.createElement('option');
                option.value = emd;
                option.textContent = emd;
                eupmyeondongSelect.appendChild(option);
            });
        }
    });
    </script>
{% endblock %}
