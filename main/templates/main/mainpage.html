{% extends 'base.html' %}
{% load static %}

{% block content %}

{% include 'main/__searchbar.html' %}
    <!-- ğŸ“Š ë°ì´í„° ë°•ìŠ¤ & ì§€ë„ ì»¨í…Œì´ë„ˆ -->
    <div class="bottom-section">
        <div class="data-container">
            <div class="leftdata-container">
                <div class="topdata1-container">
                    <p class="topdata1-text">ê¸°ìƒ ë°ì´í„°</p>
                </div>
                <div class="bottomdata1-container">
                    <div class="weather-row">
                        <img src="{% static 'images/T1-icon.svg' %}" alt="ì˜¨ë„" class="weather-icon">
                        <div class="weather-text">
                            <p>ìµœì €ì˜¨ë„ : 
                                <a href="{% url 'main:weatherpage' %}?sido={{ request.GET.sido }}&sigungu={{ request.GET.sigungu }}&eupmyeondong={{ request.GET.eupmyeondong }}">
                                {{ weather.min_temp }}
                                </a>
                                Â°C
                            </p>
                            <p>ìµœê³ ì˜¨ë„ : 
                                <a href="{% url 'main:weatherpage' %}?sido={{ request.GET.sido }}&sigungu={{ request.GET.sigungu }}&eupmyeondong={{ request.GET.eupmyeondong }}">
                                {{ weather.max_temp }}
                                </a>
                                Â°C
                            </p>
                        </div>
                    </div>
                
                    <div class="weather-row">
                        <img src="{% static 'images/T2-icon.svg' %}" alt="ìŠµë„" class="weather-icon">
                        <p class="weather-text">ìŠµë„ : 
                            <a href="{% url 'main:weatherpage' %}?sido={{ request.GET.sido }}&sigungu={{ request.GET.sigungu }}&eupmyeondong={{ request.GET.eupmyeondong }}">
                            {{ weather.humidity }}
                            </a>
                            %
                        </p>
                    </div>
                
                    <div class="weather-row">
                        <img src="{% static 'images/T3-icon.svg' %}" alt="í’ì†" class="weather-icon">
                        <p class="weather-text">í’ì† : 
                            <a href="{% url 'main:weatherpage' %}?sido={{ request.GET.sido }}&sigungu={{ request.GET.sigungu }}&eupmyeondong={{ request.GET.eupmyeondong }}">
                            {{ weather.wind_speed }}
                            </a>
                            m/s
                        </p>
                    </div>
                
                    <div class="weather-row">
                        <img src="{% static 'images/T4-icon.svg' %}" alt="ì¼ì‚¬ëŸ‰" class="weather-icon">
                        <p class="weather-text">ì¼ì‚¬ëŸ‰ : 
                            <a href="{% url 'main:weatherpage' %}?sido={{ request.GET.sido }}&sigungu={{ request.GET.sigungu }}&eupmyeondong={{ request.GET.eupmyeondong }}">
                            {{ weather.solar_radiation }}
                            </a>
                            MJ/mÂ²
                        </p>
                    </div>
                
                    <div class="weather-row">
                        <img src="{% static 'images/T5-icon.svg' %}" alt="ê°•ìˆ˜ëŸ‰" class="weather-icon">
                        <p class="weather-text">ê°•ìˆ˜ëŸ‰ :
                            <a href="{% url 'main:weatherpage' %}?sido={{ request.GET.sido }}&sigungu={{ request.GET.sigungu }}&eupmyeondong={{ request.GET.eupmyeondong }}">
                            {{ weather.avg_precipitation }}
                            </a>
                            mm
                        </p>
                    </div>
                </div>
            </div>
        
            <!-- ğŸ”½ ì•„ë˜ìª½ ë°ì´í„° ì»¨í…Œì´ë„ˆ -->
            <div class="rightdata-container">
                <div class="topdata2-container">
                    <p class="topdata2-text">í† ì–‘ ë°ì´í„°</p>
                </div>
                <div class="bottomdata2-container">
                    <p class="soil-text">í† ìƒ‰ :</p>
                    <p class="soil-text">ì‚°ë„(PH) :</p>
                    <p class="soil-text">ìœ ê¸°ë¬¼ :</p>
                    <p class="soil-text">ìœ íš¨ì¸ì‚° :</p>
                    <p class="soil-text">ì¹¼ë¥¨ :</p>
                    <p class="soil-text">ì¹¼ìŠ˜ :</p>
                    <p class="soil-text">ë§ˆê·¸ë„¤ìŠ˜ :</p>
                </div>
            </div>
        </div>
        <div class="map-container">
            <div id="map"></div>
        </div>
<!-- ì¹´ì¹´ì˜¤ ì§€ë„ API ì¶”ê°€ -->
<script type="text/javascript" src="https://dapi.kakao.com/v2/maps/sdk.js?appkey={{ kakao_api_key }}"></script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        var latitude = parseFloat("{{ latitude }}");
        var longitude = parseFloat("{{ longitude }}");

        var mapContainer = document.getElementById('map'),
            mapOption = {
                center: new kakao.maps.LatLng(latitude, longitude), // ìœ„ë„, ê²½ë„
                level: 12 // í™•ëŒ€ ë ˆë²¨
            };

        var map = new kakao.maps.Map(mapContainer, mapOption);

        // ë§ˆì»¤ ì„¤ì •
        var markerPosition = new kakao.maps.LatLng(latitude, longitude);
        var marker = new kakao.maps.Marker({
            position: markerPosition
        });

        // ë§ˆì»¤ ì§€ë„ì— ì¶”ê°€
        marker.setMap(map);
    });
</script>
{% endblock %}
