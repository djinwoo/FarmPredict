{% extends 'base.html' %}
{% load static %}

{% block content %}

{% include 'main/__searchbar.html' %}
    <!-- üìä Îç∞Ïù¥ÌÑ∞ Î∞ïÏä§ & ÏßÄÎèÑ Ïª®ÌÖåÏù¥ÎÑà -->
    <div class="bottom-section">
        <div class="data-container">
            <div class="leftdata-container">
                <div class="topdata1-container">
                    <p class="topdata1-text">Í∏∞ÏÉÅ Îç∞Ïù¥ÌÑ∞</p>
                </div>
                <div class="bottomdata1-container">
                    <div class="weather-row">
                        <img src="{% static 'images/T1-icon.svg' %}" alt="Ïò®ÎèÑ" class="weather-icon">
                        <div class="weather-text">
                            <p>ÏµúÏ†ÄÏò®ÎèÑ : 
                                <a href="{% url 'main:weatherpage' %}?sido={{ request.GET.sido }}&sigungu={{ request.GET.sigungu }}&eupmyeondong={{ request.GET.eupmyeondong }}">
                                {{ weather.min_temp }}
                                </a>
                                ¬∞C
                            </p>
                            <p>ÏµúÍ≥†Ïò®ÎèÑ : 
                                <a href="{% url 'main:weatherpage' %}?sido={{ request.GET.sido }}&sigungu={{ request.GET.sigungu }}&eupmyeondong={{ request.GET.eupmyeondong }}">
                                {{ weather.max_temp }}
                                </a>
                                ¬∞C
                            </p>
                        </div>
                    </div>
                
                    <div class="weather-row">
                        <img src="{% static 'images/T2-icon.svg' %}" alt="ÏäµÎèÑ" class="weather-icon">
                        <p class="weather-text">ÏäµÎèÑ : 
                            <a href="{% url 'main:weatherpage' %}?sido={{ request.GET.sido }}&sigungu={{ request.GET.sigungu }}&eupmyeondong={{ request.GET.eupmyeondong }}">
                            {{ weather.humidity }}
                            </a>
                            %
                        </p>
                    </div>
                
                    <div class="weather-row">
                        <img src="{% static 'images/T3-icon.svg' %}" alt="ÌíçÏÜç" class="weather-icon">
                        <p class="weather-text">ÌíçÏÜç : 
                            <a href="{% url 'main:weatherpage' %}?sido={{ request.GET.sido }}&sigungu={{ request.GET.sigungu }}&eupmyeondong={{ request.GET.eupmyeondong }}">
                            {{ weather.wind_speed }}
                            </a>
                            m/s
                        </p>
                    </div>
                
                    <div class="weather-row">
                        <img src="{% static 'images/T4-icon.svg' %}" alt="ÏùºÏÇ¨Îüâ" class="weather-icon">
                        <p class="weather-text">ÏùºÏÇ¨Îüâ : 
                            <a href="{% url 'main:weatherpage' %}?sido={{ request.GET.sido }}&sigungu={{ request.GET.sigungu }}&eupmyeondong={{ request.GET.eupmyeondong }}">
                            {{ weather.solar_radiation }}
                            </a>
                            MJ/m¬≤
                        </p>
                    </div>
                
                    <div class="weather-row">
                        <img src="{% static 'images/T5-icon.svg' %}" alt="Í∞ïÏàòÎüâ" class="weather-icon">
                        <p class="weather-text">Í∞ïÏàòÎüâ : 
                            <a href="{% url 'main:weatherpage' %}?sido={{ request.GET.sido }}&sigungu={{ request.GET.sigungu }}&eupmyeondong={{ request.GET.eupmyeondong }}">
                            {{ weather.avg_precipitation }}
                            </a>
                            mm
                        </p>
                    </div>
                </div>
            </div>
        
            <!-- üîΩ ÏïÑÎûòÏ™Ω Îç∞Ïù¥ÌÑ∞ Ïª®ÌÖåÏù¥ÎÑà -->
            <div class="rightdata-container">
                <div class="topdata2-container">
                    <p class="topdata2-text">ÌÜ†Ïñë Îç∞Ïù¥ÌÑ∞</p>
                </div>
                <div class="bottomdata2-container">
                    <p class="soil-text">ÏÇ∞ÎèÑ :&nbsp;
                        <a href="{% url 'main:soilpage' %}?sido={{ request.GET.sido }}&sigungu={{ request.GET.sigungu }}&eupmyeondong={{ request.GET.eupmyeondong }}">
                        {{ soil.ph }}
                        </a>
                        pH
                    </p>
                    <p class="soil-text">Ïú†Í∏∞Î¨º :&nbsp;
                        <a href="{% url 'main:soilpage' %}?sido={{ request.GET.sido }}&sigungu={{ request.GET.sigungu }}&eupmyeondong={{ request.GET.eupmyeondong }}">
                        {{ soil.organic_matter }}
                        </a>
                        %
                    </p>
                    <p class="soil-text">Ïú†Ìö®Ïù∏ÏÇ∞ :&nbsp;
                        <a href="{% url 'main:soilpage' %}?sido={{ request.GET.sido }}&sigungu={{ request.GET.sigungu }}&eupmyeondong={{ request.GET.eupmyeondong }}">
                        {{ soil.available_phosphorus }}
                        </a>
                        mg/kg
                    </p>
                    <p class="soil-text">ÏπºÎ•® :&nbsp;
                        <a href="{% url 'main:soilpage' %}?sido={{ request.GET.sido }}&sigungu={{ request.GET.sigungu }}&eupmyeondong={{ request.GET.eupmyeondong }}">
                        {{ soil.potassium }}
                        </a>
                        cmol/kg
                    </p>
                    <p class="soil-text">ÏπºÏäò :&nbsp;
                        <a href="{% url 'main:soilpage' %}?sido={{ request.GET.sido }}&sigungu={{ request.GET.sigungu }}&eupmyeondong={{ request.GET.eupmyeondong }}">
                        {{ soil.calcium }}
                        </a>
                        cmol/kg
                    </p>
                    <p class="soil-text">ÎßàÍ∑∏ÎÑ§Ïäò :&nbsp;
                        <a href="{% url 'main:soilpage' %}?sido={{ request.GET.sido }}&sigungu={{ request.GET.sigungu }}&eupmyeondong={{ request.GET.eupmyeondong }}">
                        {{ soil.magnesium }}
                        </a>
                    </p>
                    <p class="soil-text">ÏßàÏÜå :&nbsp;
                        <a href="{% url 'main:soilpage' %}?sido={{ request.GET.sido }}&sigungu={{ request.GET.sigungu }}&eupmyeondong={{ request.GET.eupmyeondong }}">
                        {{ soil.nitrogen }}
                        </a>
                        %
                    </p>
                </div>
            </div>
        </div>
        <div class="map-container">
            <div id="map"></div>
        </div>
<!-- Ïπ¥Ïπ¥Ïò§ ÏßÄÎèÑ API Ï∂îÍ∞Ä -->
<script type="text/javascript" src="https://dapi.kakao.com/v2/maps/sdk.js?appkey={{ kakao_api_key }}"></script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        var latitude = parseFloat("{{ latitude }}");
        var longitude = parseFloat("{{ longitude }}");

        var mapContainer = document.getElementById('map'),
            mapOption = {
                center: new kakao.maps.LatLng(latitude, longitude), // ÏúÑÎèÑ, Í≤ΩÎèÑ
                level: 12 // ÌôïÎåÄ Î†àÎ≤®
            };

        var map = new kakao.maps.Map(mapContainer, mapOption);

        // ÎßàÏª§ ÏÑ§Ï†ï
        var markerPosition = new kakao.maps.LatLng(latitude, longitude);
        var marker = new kakao.maps.Marker({
            position: markerPosition
        });

        // ÎßàÏª§ ÏßÄÎèÑÏóê Ï∂îÍ∞Ä
        marker.setMap(map);
    });
</script>
{% endblock %}
