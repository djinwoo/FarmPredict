{% extends 'base.html' %}
{% load static %}
{% load humanize %}

{% block content %}

<h2 class="page-title">ë°°ì¶” ìƒì‚°ëŸ‰ ì˜ˆì¸¡í•˜ê¸°</h2>

<form method="get" class="filter-form" id="filter-form">
<div class="filter-box">

    <!-- ğŸ”· ì‹œë„ ë‹¨ì¼ ì„ íƒ -->
    <div class="sido-section">
    <div class="sido-checkboxes">
        {% for sido in sido_list %}
        <label>
            <input type="checkbox" name="sido" value="{{ sido }}" class="sido-check"
                {% if sido == selected_sido %}checked{% endif %}>
            {{ sido }}
        </label>
        {% endfor %}
    </div>
    </div>

    <hr class="filter-divider">

    <!-- ğŸ”· ì—°ë„ ë‹¨ì¼ ì„ íƒ -->
    <div class="year-section">
        <div class="year-filter-row">
        {% for year in year_list %}
        <label>
        <input type="checkbox" name="year" value="{{ year }}" class="year-check"
                {% if year|stringformat:"s" == selected_year %}checked{% endif %}>
        {{ year }}
        </label>
        {% endfor %}

        <!-- ê²€ìƒ‰ ë²„íŠ¼ ë°”ë¡œ ì´ì–´ë¶™ì´ê¸° -->
        <button type="submit" class="inline-search-button">ê²€ìƒ‰</button>
        </div>
    </div>

</div>
</form>

<!-- âœ… ë‹¨ì¼ ì„ íƒ ìŠ¤í¬ë¦½íŠ¸ -->
<script>
document.addEventListener("DOMContentLoaded", function () {
const form = document.getElementById("filter-form");

  // ì‹œë„ ë‹¨ì¼ ì„ íƒ
const sidoChecks = document.querySelectorAll(".sido-check");
sidoChecks.forEach(cb => {
    cb.addEventListener("change", function () {
    sidoChecks.forEach(box => {
        if (box !== this) box.checked = false;
    });
    });
});

  // ì—°ë„ ë‹¨ì¼ ì„ íƒ
const yearChecks = document.querySelectorAll(".year-check");
yearChecks.forEach(cb => {
    cb.addEventListener("change", function () {
    yearChecks.forEach(box => {
        if (box !== this) box.checked = false;
    });
    });
});

  // í•„ìˆ˜ ì²´í¬ í™•ì¸
form.addEventListener("submit", function (e) {
    const sidoSelected = Array.from(sidoChecks).some(cb => cb.checked);
    const yearSelected = Array.from(yearChecks).some(cb => cb.checked);
    if (!sidoSelected || !yearSelected) {
    e.preventDefault();
    alert("ì‹œë„ì™€ ì—°ë„ ì¤‘ í•˜ë‚˜ë¼ë„ ì„ íƒë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.");
    }
});

</script>

{% endblock %}